use std
use bio

pkg xml =
	type xmleventiter = xmlctx

	type xmlctx = struct
		file	:	bio.file#
		buf	:	byte[:]
		bidx	:	std.size
		bcur	:	std.size
		line	:	std.size
		off	:	std.size
		state	:	state
		more	:	bool
		error	:	bool
	;;

	type err = struct
		line	:	std.size
		off	:	std.size
		err	:	errtype
	;;

	type errtype = union
		`Empty
		`Inval		char
		`Junk		char
		`Trunc		bio.err
		`Unexpected	(char, char)
	;;

	type state = union
		`Open
		`Close
		`Closing	byte[:]
	;;
;;
